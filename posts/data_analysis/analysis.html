<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Hrriday Ruparel">
<meta name="dcterms.date" content="2025-02-24">

<title>AISG 2025 Assignment 1 - Part1: Data Exploration and Understanding</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../icon.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
<script src="https://unpkg.com/@jupyter-widgets/html-manager@*/dist/embed-amd.js" crossorigin="anonymous"></script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">AISG 2025 Assignment 1</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">अप्राकृतिक बुद्धिमत्ता 4 सामाजिक भलाई</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/guntas-13/CS691_AISG"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Part1: Data Exploration and Understanding</h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Hrriday Ruparel </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">February 24, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#textimporting-libraries" id="toc-textimporting-libraries" class="nav-link active" data-scroll-target="#textimporting-libraries"><span class="math inline">\(\text{Importing Libraries}\)</span></a></li>
  <li><a href="#texthelper-functions" id="toc-texthelper-functions" class="nav-link" data-scroll-target="#texthelper-functions"><span class="math inline">\(\text{Helper Functions}\)</span></a></li>
  <li><a href="#textloading-data" id="toc-textloading-data" class="nav-link" data-scroll-target="#textloading-data"><span class="math inline">\(\text{Loading Data}\)</span></a></li>
  <li><a href="#textdata-exploration-and-understanding" id="toc-textdata-exploration-and-understanding" class="nav-link" data-scroll-target="#textdata-exploration-and-understanding"><span class="math inline">\(\text{Data Exploration and Understanding}\)</span></a>
  <ul class="collapse">
  <li><a href="#textdataset-statistics" id="toc-textdataset-statistics" class="nav-link" data-scroll-target="#textdataset-statistics"><span class="math inline">\(\text{Dataset Statistics}\)</span></a></li>
  <li><a href="#textcalculate-the-statistics-of-the-area-of-solar-panels-in-meters" id="toc-textcalculate-the-statistics-of-the-area-of-solar-panels-in-meters" class="nav-link" data-scroll-target="#textcalculate-the-statistics-of-the-area-of-solar-panels-in-meters"><span class="math inline">\(\text{Calculate the statistics of the area of solar panels in meters}\)</span></a></li>
  <li><a href="#textgeoreferencing" id="toc-textgeoreferencing" class="nav-link" data-scroll-target="#textgeoreferencing"><span class="math inline">\(\text{Georeferencing}\)</span></a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="textimporting-libraries" class="level2">
<h2 class="anchored" data-anchor-id="textimporting-libraries"><span class="math inline">\(\text{Importing Libraries}\)</span></h2>
<div id="cell-2" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> cv2</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> glob <span class="im">import</span> glob</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> leafmap <span class="im">import</span> leafmap</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pyproj <span class="im">import</span> Transformer</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.patches <span class="im">as</span> mpatches</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> natsort.natsort <span class="im">import</span> natsorted</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>matplotlib inline</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>config InlineBackend.figure_format <span class="op">=</span> <span class="st">'retina'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="texthelper-functions" class="level2">
<h2 class="anchored" data-anchor-id="texthelper-functions"><span class="math inline">\(\text{Helper Functions}\)</span></h2>
<div id="cell-4" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> display_image(im, label, ax <span class="op">=</span> <span class="va">None</span>):</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Display an image with bounding boxes and class labels.</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters:</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co">    im (numpy.ndarray): The image to display.</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co">    label (list): List of labels for the objects in the image. Each label is a string in the format 'class_id x_center y_center width height'.</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co">    ax (matplotlib.axes._axes.Axes, optional): The axes on which to display the image. If None, a new figure is created.</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co">    matplotlib.axes._axes.Axes: The axes with the image and bounding boxes.</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    class_colors <span class="op">=</span> {<span class="dv">0</span>: (<span class="dv">0</span>, <span class="dv">255</span>, <span class="dv">0</span>), <span class="dv">1</span>: (<span class="dv">255</span>, <span class="dv">0</span>, <span class="dv">0</span>), <span class="dv">2</span>: (<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">255</span>)}</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    class_labels <span class="op">=</span> {<span class="dv">0</span>: <span class="st">'Class 0'</span>, <span class="dv">1</span>: <span class="st">'Class 1'</span>, <span class="dv">2</span>: <span class="st">'Class 2'</span>}</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    class_colors_for_legend <span class="op">=</span> {<span class="dv">0</span>: (<span class="dv">0</span>, <span class="dv">255</span>, <span class="dv">0</span>), <span class="dv">1</span>: (<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">255</span>), <span class="dv">2</span>: (<span class="dv">255</span>, <span class="dv">0</span>, <span class="dv">0</span>)}</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> ax <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> line <span class="kw">in</span> label:</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>            line <span class="op">=</span> line.strip().split()</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>            class_id, x_center, y_center, width, height <span class="op">=</span> <span class="bu">map</span>(<span class="bu">float</span>, line)</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>            x_center, y_center <span class="op">=</span> <span class="bu">int</span>(x_center <span class="op">*</span> im.shape[<span class="dv">1</span>]), <span class="bu">int</span>(y_center <span class="op">*</span> im.shape[<span class="dv">0</span>])</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>            width, height <span class="op">=</span> <span class="bu">int</span>(width <span class="op">*</span> im.shape[<span class="dv">1</span>]), <span class="bu">int</span>(height <span class="op">*</span> im.shape[<span class="dv">0</span>])</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>            x1, y1 <span class="op">=</span> x_center <span class="op">-</span> width <span class="op">//</span> <span class="dv">2</span>, y_center <span class="op">-</span> height <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>            x2, y2 <span class="op">=</span> x_center <span class="op">+</span> width <span class="op">//</span> <span class="dv">2</span>, y_center <span class="op">+</span> height <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>            color <span class="op">=</span> class_colors[<span class="bu">int</span>(class_id)]</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>            cv2.rectangle(im, (x1, y1), (x2, y2), color, <span class="dv">2</span>)</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>        plt.figure(figsize<span class="op">=</span>(<span class="dv">6</span>, <span class="dv">6</span>))</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>        plt.imshow(cv2.cvtColor(im, cv2.COLOR_BGR2RGB))</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>        plt.axis(<span class="st">'off'</span>)</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Create custom legend handles</span></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>        handles <span class="op">=</span> [mpatches.Patch(color<span class="op">=</span>np.array(color)<span class="op">/</span><span class="dv">255</span>, label<span class="op">=</span>class_labels[class_id]) <span class="cf">for</span> class_id, color <span class="kw">in</span> class_colors_for_legend.items()]</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>        plt.legend(handles<span class="op">=</span>handles, loc<span class="op">=</span><span class="st">'upper right'</span>)</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>        plt.show()</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> line <span class="kw">in</span> label:</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>            line <span class="op">=</span> line.strip().split()</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>            class_id, x_center, y_center, width, height <span class="op">=</span> <span class="bu">map</span>(<span class="bu">float</span>, line)</span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>            x_center, y_center <span class="op">=</span> <span class="bu">int</span>(x_center <span class="op">*</span> im.shape[<span class="dv">1</span>]), <span class="bu">int</span>(y_center <span class="op">*</span> im.shape[<span class="dv">0</span>])</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>            width, height <span class="op">=</span> <span class="bu">int</span>(width <span class="op">*</span> im.shape[<span class="dv">1</span>]), <span class="bu">int</span>(height <span class="op">*</span> im.shape[<span class="dv">0</span>])</span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>            x1, y1 <span class="op">=</span> x_center <span class="op">-</span> width <span class="op">//</span> <span class="dv">2</span>, y_center <span class="op">-</span> height <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>            x2, y2 <span class="op">=</span> x_center <span class="op">+</span> width <span class="op">//</span> <span class="dv">2</span>, y_center <span class="op">+</span> height <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>            color <span class="op">=</span> class_colors[<span class="bu">int</span>(class_id)]</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>            cv2.rectangle(im, (x1, y1), (x2, y2), color, <span class="dv">2</span>)</span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>        ax.imshow(cv2.cvtColor(im, cv2.COLOR_BGR2RGB))</span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>        ax.axis(<span class="st">'off'</span>)</span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Create custom legend handles</span></span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>        handles <span class="op">=</span> [mpatches.Patch(color<span class="op">=</span>np.array(color)<span class="op">/</span><span class="dv">255</span>, label<span class="op">=</span>class_labels[class_id]) <span class="cf">for</span> class_id, color <span class="kw">in</span> class_colors_for_legend.items()]</span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>        ax.legend(handles<span class="op">=</span>handles, loc<span class="op">=</span><span class="st">'upper right'</span>)</span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> ax</span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> extract_bounds(file_name):</span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a>    min_x <span class="op">=</span> file_name.split(<span class="st">"_"</span>)[<span class="dv">5</span>]</span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a>    min_y <span class="op">=</span> file_name.split(<span class="st">"_"</span>)[<span class="dv">7</span>]</span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a>    min_x, min_y <span class="op">=</span> <span class="bu">map</span>(<span class="bu">float</span>, [min_x, min_y])</span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [[min_x, min_y], [min_x<span class="op">+</span><span class="dv">416</span>, min_y], [min_x<span class="op">+</span><span class="dv">416</span>, min_y<span class="op">+</span><span class="dv">416</span>], [min_x, min_y<span class="op">+</span><span class="dv">416</span>]]</span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_lat_long_of_chip(file_name):</span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a><span class="co">    Get the latitude and longitude of the corners of an image chip.</span></span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters:</span></span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a><span class="co">    file_name (str): The name of the file containing the image chip.</span></span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a><span class="co">    list: A list of latitude and longitude coordinates for the corners of the image chip.</span></span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a>    tiles <span class="op">=</span> [  (<span class="fl">307670.04</span>, <span class="fl">0.31</span>, <span class="fl">0.0</span>, <span class="fl">5434427.100000001</span>, <span class="fl">0.0</span>, <span class="op">-</span><span class="fl">0.31</span>),</span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a>                (<span class="fl">312749.07999999996</span>, <span class="fl">0.31</span>, <span class="fl">0.0</span>, <span class="fl">5403952.860000001</span>, <span class="fl">0.0</span>, <span class="op">-</span><span class="fl">0.31</span>),</span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a>                (<span class="fl">312749.07999999996</span>, <span class="fl">0.31</span>, <span class="fl">0.0</span>, <span class="fl">5363320.540000001</span>, <span class="fl">0.0</span>, <span class="op">-</span><span class="fl">0.31</span>)]</span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a>    tile_index <span class="op">=</span> <span class="bu">int</span>(file_name.split(<span class="st">"_"</span>)[<span class="dv">2</span>])<span class="op">-</span><span class="dv">1</span></span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a>    bounds <span class="op">=</span> extract_bounds(file_name)</span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a>    lat_long <span class="op">=</span> []</span>
<span id="cb2-82"><a href="#cb2-82" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> bound <span class="kw">in</span> bounds:</span>
<span id="cb2-83"><a href="#cb2-83" aria-hidden="true" tabindex="-1"></a>        x, y <span class="op">=</span> bound</span>
<span id="cb2-84"><a href="#cb2-84" aria-hidden="true" tabindex="-1"></a>        e <span class="op">=</span> tiles[tile_index][<span class="dv">0</span>] <span class="op">+</span> ((x) <span class="op">*</span> tiles[tile_index][<span class="dv">1</span>])</span>
<span id="cb2-85"><a href="#cb2-85" aria-hidden="true" tabindex="-1"></a>        n <span class="op">=</span> tiles[tile_index][<span class="dv">3</span>] <span class="op">+</span> ((y) <span class="op">*</span> tiles[tile_index][<span class="op">-</span><span class="dv">1</span>])</span>
<span id="cb2-86"><a href="#cb2-86" aria-hidden="true" tabindex="-1"></a>        transformer <span class="op">=</span> Transformer.from_crs(<span class="st">"epsg:32633"</span>, <span class="st">"epsg:4326"</span>, always_xy<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb2-87"><a href="#cb2-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-88"><a href="#cb2-88" aria-hidden="true" tabindex="-1"></a>        <span class="bu">long</span>, lat <span class="op">=</span> transformer.transform(e,n)</span>
<span id="cb2-89"><a href="#cb2-89" aria-hidden="true" tabindex="-1"></a>        lat_long.append([lat, <span class="bu">long</span>])</span>
<span id="cb2-90"><a href="#cb2-90" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> lat_long</span>
<span id="cb2-91"><a href="#cb2-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-92"><a href="#cb2-92" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_lat_long_of_bb(file_name, label, instance_idx):</span>
<span id="cb2-93"><a href="#cb2-93" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb2-94"><a href="#cb2-94" aria-hidden="true" tabindex="-1"></a><span class="co">    Get the latitude and longitude of the bounding box corners for a specific instance in an image chip.</span></span>
<span id="cb2-95"><a href="#cb2-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-96"><a href="#cb2-96" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters:</span></span>
<span id="cb2-97"><a href="#cb2-97" aria-hidden="true" tabindex="-1"></a><span class="co">    file_name (str): The name of the file containing the image chip.</span></span>
<span id="cb2-98"><a href="#cb2-98" aria-hidden="true" tabindex="-1"></a><span class="co">    label (list): List of labels for the objects in the image. Each label is a string in the format 'class_id x_center y_center width height'.</span></span>
<span id="cb2-99"><a href="#cb2-99" aria-hidden="true" tabindex="-1"></a><span class="co">    instance_idx (int): The index of the instance in the label list for which to get the bounding box coordinates.</span></span>
<span id="cb2-100"><a href="#cb2-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-101"><a href="#cb2-101" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb2-102"><a href="#cb2-102" aria-hidden="true" tabindex="-1"></a><span class="co">    list: A list of latitude and longitude coordinates for the corners of the bounding box.</span></span>
<span id="cb2-103"><a href="#cb2-103" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb2-104"><a href="#cb2-104" aria-hidden="true" tabindex="-1"></a>    tiles <span class="op">=</span> [  (<span class="fl">307670.04</span>, <span class="fl">0.31</span>, <span class="fl">0.0</span>, <span class="fl">5434427.100000001</span>, <span class="fl">0.0</span>, <span class="op">-</span><span class="fl">0.31</span>),</span>
<span id="cb2-105"><a href="#cb2-105" aria-hidden="true" tabindex="-1"></a>                (<span class="fl">312749.07999999996</span>, <span class="fl">0.31</span>, <span class="fl">0.0</span>, <span class="fl">5403952.860000001</span>, <span class="fl">0.0</span>, <span class="op">-</span><span class="fl">0.31</span>),</span>
<span id="cb2-106"><a href="#cb2-106" aria-hidden="true" tabindex="-1"></a>                (<span class="fl">312749.07999999996</span>, <span class="fl">0.31</span>, <span class="fl">0.0</span>, <span class="fl">5363320.540000001</span>, <span class="fl">0.0</span>, <span class="op">-</span><span class="fl">0.31</span>)]</span>
<span id="cb2-107"><a href="#cb2-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-108"><a href="#cb2-108" aria-hidden="true" tabindex="-1"></a>    tile_index <span class="op">=</span> <span class="bu">int</span>(file_name.split(<span class="st">"_"</span>)[<span class="dv">2</span>])<span class="op">-</span><span class="dv">1</span></span>
<span id="cb2-109"><a href="#cb2-109" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> label[instance_idx].strip().split()</span>
<span id="cb2-110"><a href="#cb2-110" aria-hidden="true" tabindex="-1"></a>    x_center, y_center, width, height <span class="op">=</span> <span class="bu">map</span>(<span class="bu">float</span>, data[<span class="dv">1</span>:])</span>
<span id="cb2-111"><a href="#cb2-111" aria-hidden="true" tabindex="-1"></a>    x_center, y_center <span class="op">=</span> x_center <span class="op">*</span> <span class="dv">416</span>, y_center <span class="op">*</span> <span class="dv">416</span></span>
<span id="cb2-112"><a href="#cb2-112" aria-hidden="true" tabindex="-1"></a>    width, height <span class="op">=</span> width <span class="op">*</span> <span class="dv">416</span>, height <span class="op">*</span> <span class="dv">416</span></span>
<span id="cb2-113"><a href="#cb2-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-114"><a href="#cb2-114" aria-hidden="true" tabindex="-1"></a>    min_x, min_y <span class="op">=</span> extract_bounds(file_name)[<span class="dv">0</span>]</span>
<span id="cb2-115"><a href="#cb2-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-116"><a href="#cb2-116" aria-hidden="true" tabindex="-1"></a>    coords <span class="op">=</span> [((x_center <span class="op">+</span> min_x), (y_center <span class="op">+</span> min_y)), </span>
<span id="cb2-117"><a href="#cb2-117" aria-hidden="true" tabindex="-1"></a>              ((x_center <span class="op">+</span> min_x) <span class="op">-</span> width <span class="op">/</span> <span class="dv">2</span>, (y_center <span class="op">+</span> min_y) <span class="op">-</span> height <span class="op">/</span> <span class="dv">2</span>), </span>
<span id="cb2-118"><a href="#cb2-118" aria-hidden="true" tabindex="-1"></a>              ((x_center <span class="op">+</span> min_x) <span class="op">+</span> width <span class="op">/</span> <span class="dv">2</span>, (y_center <span class="op">+</span> min_y) <span class="op">-</span> height <span class="op">/</span> <span class="dv">2</span>), </span>
<span id="cb2-119"><a href="#cb2-119" aria-hidden="true" tabindex="-1"></a>              ((x_center <span class="op">+</span> min_x) <span class="op">+</span> width <span class="op">/</span> <span class="dv">2</span>, (y_center <span class="op">+</span> min_y) <span class="op">+</span> height <span class="op">/</span> <span class="dv">2</span>), </span>
<span id="cb2-120"><a href="#cb2-120" aria-hidden="true" tabindex="-1"></a>              ((x_center <span class="op">+</span> min_x) <span class="op">-</span> width <span class="op">/</span> <span class="dv">2</span>, (y_center <span class="op">+</span> min_y) <span class="op">+</span> height <span class="op">/</span> <span class="dv">2</span>)]</span>
<span id="cb2-121"><a href="#cb2-121" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-122"><a href="#cb2-122" aria-hidden="true" tabindex="-1"></a>    lat_long <span class="op">=</span> []</span>
<span id="cb2-123"><a href="#cb2-123" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> coord <span class="kw">in</span> coords:</span>
<span id="cb2-124"><a href="#cb2-124" aria-hidden="true" tabindex="-1"></a>        x, y <span class="op">=</span> coord</span>
<span id="cb2-125"><a href="#cb2-125" aria-hidden="true" tabindex="-1"></a>        e <span class="op">=</span> tiles[tile_index][<span class="dv">0</span>] <span class="op">+</span> ((x) <span class="op">*</span> tiles[tile_index][<span class="dv">1</span>])</span>
<span id="cb2-126"><a href="#cb2-126" aria-hidden="true" tabindex="-1"></a>        n <span class="op">=</span> tiles[tile_index][<span class="dv">3</span>] <span class="op">+</span> ((y) <span class="op">*</span> tiles[tile_index][<span class="op">-</span><span class="dv">1</span>])</span>
<span id="cb2-127"><a href="#cb2-127" aria-hidden="true" tabindex="-1"></a>        transformer <span class="op">=</span> Transformer.from_crs(<span class="st">"epsg:32633"</span>, <span class="st">"epsg:4326"</span>, always_xy<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb2-128"><a href="#cb2-128" aria-hidden="true" tabindex="-1"></a>        <span class="bu">long</span>, lat <span class="op">=</span> transformer.transform(e,n)</span>
<span id="cb2-129"><a href="#cb2-129" aria-hidden="true" tabindex="-1"></a>        lat_long.append([lat, <span class="bu">long</span>])</span>
<span id="cb2-130"><a href="#cb2-130" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> lat_long</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="textloading-data" class="level2">
<h2 class="anchored" data-anchor-id="textloading-data"><span class="math inline">\(\text{Loading Data}\)</span></h2>
<div id="cell-6" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>labels_dir_path <span class="op">=</span> <span class="st">"./labels/labels_native/"</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>label_files <span class="op">=</span> glob(labels_dir_path <span class="op">+</span> <span class="st">"*.txt"</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>label_files <span class="op">=</span> [label_file.split(<span class="st">"/"</span>)[<span class="op">-</span><span class="dv">1</span>] <span class="cf">for</span> label_file <span class="kw">in</span> label_files]</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>label_files <span class="op">=</span> natsorted(label_files)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>images_dir_path <span class="op">=</span> <span class="st">"./maxar/image_chips/image_chips_native/"</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>image_files <span class="op">=</span> glob(images_dir_path <span class="op">+</span> <span class="st">"*.tif"</span>)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>image_files <span class="op">=</span> [image_file.split(<span class="st">"/"</span>)[<span class="op">-</span><span class="dv">1</span>] <span class="cf">for</span> image_file <span class="kw">in</span> image_files]</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>image_files <span class="op">=</span> natsorted(image_files)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Number of files: </span><span class="ch">\n</span><span class="st">Labels: </span><span class="sc">{}</span><span class="ch">\n</span><span class="st">Images: </span><span class="sc">{}</span><span class="st">"</span>.<span class="bu">format</span>(<span class="bu">len</span>(label_files), <span class="bu">len</span>(image_files)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Number of files: 
Labels: 2542
Images: 2542</code></pre>
</div>
</div>
<div id="cell-7" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>all_labels <span class="op">=</span> []</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> label_file_path <span class="kw">in</span> label_files:</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(os.path.join(labels_dir_path, label_file_path), <span class="st">'r'</span>) <span class="im">as</span> f:</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>        all_labels.append(f.readlines())</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>f.close()</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(all_labels)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>2542</code></pre>
</div>
</div>
<div id="cell-8" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>all_images <span class="op">=</span> []</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> image_file_path <span class="kw">in</span> image_files:</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    all_images.append(cv2.imread(os.path.join(images_dir_path, image_file_path)))</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>all_images <span class="op">=</span> np.array(all_images)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-9" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>all_images.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>(2542, 416, 416, 3)</code></pre>
</div>
</div>
<div id="cell-10" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>idx <span class="op">=</span> <span class="dv">761</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>display_image(all_images[idx], all_labels[idx])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_files/figure-html/cell-8-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="textdata-exploration-and-understanding" class="level2">
<h2 class="anchored" data-anchor-id="textdata-exploration-and-understanding"><span class="math inline">\(\text{Data Exploration and Understanding}\)</span></h2>
<section id="textdataset-statistics" class="level3">
<h3 class="anchored" data-anchor-id="textdataset-statistics"><span class="math inline">\(\text{Dataset Statistics}\)</span></h3>
<ul>
<li>How many instances of solar panels are present in the dataset?</li>
<li>Compute and show the value counts of labels per image. E.g., X images have 0 labels, Y images have 1 label, … and so on.</li>
</ul>
<table class="table">
<thead>
<tr class="header">
<th>Class ID</th>
<th>Description</th>
<th>Count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>High Confidence Detection</td>
<td>29267</td>
</tr>
<tr class="even">
<td>1</td>
<td>Moderate Confidence Detection</td>
<td>130</td>
</tr>
<tr class="odd">
<td>2</td>
<td>Low Confidence Detection</td>
<td>228</td>
</tr>
<tr class="even">
<td></td>
<td><strong>Total</strong></td>
<td>29635</td>
</tr>
</tbody>
</table>
<div id="cell-14" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># How many instances of solar panels are present in the dataset?</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>total_instances <span class="op">=</span> <span class="dv">0</span> <span class="co"># Here, 'instance' means a single solar panel detection </span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> label <span class="kw">in</span> all_labels:</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    total_instances <span class="op">+=</span> <span class="bu">len</span>(label)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Total number of images: </span><span class="sc">{}</span><span class="st">"</span>.<span class="bu">format</span>(<span class="bu">len</span>(all_labels)))</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Total instances of solar panels: </span><span class="sc">{}</span><span class="st">"</span>.<span class="bu">format</span>(total_instances))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Total number of images: 2542
Total instances of solar panels: 29625</code></pre>
</div>
</div>
<div id="cell-15" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute and show the value counts of labels per image. E.g., X images have 0 labels, Y images have 1 label, … and so on.</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>label_counts <span class="op">=</span> [<span class="bu">len</span>(label) <span class="cf">for</span> label <span class="kw">in</span> all_labels]</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>label_counts <span class="op">=</span> pd.Series(label_counts)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>label_counts <span class="op">=</span> pd.DataFrame(label_counts.value_counts(), columns<span class="op">=</span>[<span class="st">'count'</span>])</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>label_counts.reset_index(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>label_counts.columns <span class="op">=</span> [<span class="st">'Number of instances per image'</span>, <span class="st">'Number of images'</span>]</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>label_counts</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Number of instances per image</th>
<th data-quarto-table-cell-role="th">Number of images</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>3</td>
<td>221</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>4</td>
<td>218</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>5</td>
<td>217</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>6</td>
<td>189</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>8</td>
<td>184</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">69</td>
<td>64</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">70</td>
<td>61</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">71</td>
<td>56</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">72</td>
<td>55</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">73</td>
<td>22</td>
<td>1</td>
</tr>
</tbody>
</table>

<p>74 rows × 2 columns</p>
</div>
</div>
</div>
<div id="cell-16" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>label_counts.plot(x<span class="op">=</span><span class="st">'Number of instances per image'</span>, y<span class="op">=</span><span class="st">'Number of images'</span>, kind<span class="op">=</span><span class="st">'bar'</span>, figsize<span class="op">=</span>(<span class="dv">20</span>, <span class="dv">6</span>), color<span class="op">=</span><span class="st">'skyblue'</span>, edgecolor<span class="op">=</span><span class="st">'black'</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_files/figure-html/cell-11-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-17" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of instances per class</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>class_counts <span class="op">=</span> {<span class="dv">0</span>: <span class="dv">0</span>, <span class="dv">1</span>: <span class="dv">0</span>, <span class="dv">2</span>: <span class="dv">0</span>}</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> label <span class="kw">in</span> all_labels:</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> line <span class="kw">in</span> label:</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>        class_id <span class="op">=</span> <span class="bu">int</span>(line.strip().split()[<span class="dv">0</span>])</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>        class_counts[class_id] <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>class_counts</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
<pre><code>{0: 29267, 1: 130, 2: 228}</code></pre>
</div>
</div>
</section>
<section id="textcalculate-the-statistics-of-the-area-of-solar-panels-in-meters" class="level3">
<h3 class="anchored" data-anchor-id="textcalculate-the-statistics-of-the-area-of-solar-panels-in-meters"><span class="math inline">\(\text{Calculate the statistics of the area of solar panels in meters}\)</span></h3>
<ul>
<li>What method was used to compute the area (in meters) for a single instance?</li>
<li>What is the mean area and standard deviation?</li>
<li>Plot the histogram of areas. What do you observe?</li>
</ul>
<div id="cell-19" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># What method was used to compute the area (in meters) for a single instance?</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"""</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="st">The area of a single instance is computed by multiplying the width and height of the bounding box by the area of a single pixel in squared meters.</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="st">Area of a single pixel:                 0.31 m x 0.31 m = 0.0961 m^2/pixel                                      [0.31 meters is the resolution of the image]</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="st">Area of a single instance (approx):     (x_width x 416) x (y_width x 416) x 0.0961 m^2/pixel                    [416 is the size of the image]</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
The area of a single instance is computed by multiplying the width and height of the bounding box by the area of a single pixel in squared meters.

Area of a single pixel:                 0.31 m x 0.31 m = 0.0961 m^2/pixel                                      [0.31 meters is the resolution of the image]
Area of a single instance (approx):     (x_width x 416) x (y_width x 416) x 0.0961 m^2/pixel                    [416 is the size of the image]
</code></pre>
</div>
</div>
<div id="cell-20" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># What is the mean area and standard deviation?</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>areas <span class="op">=</span> []</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> label <span class="kw">in</span> all_labels:</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> line <span class="kw">in</span> label:</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>        class_id, x_center, y_center, width, height <span class="op">=</span> <span class="bu">map</span>(<span class="bu">float</span>, line.strip().split())</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>        areas.append(width <span class="op">*</span> height <span class="op">*</span> <span class="fl">0.0961</span> <span class="op">*</span> <span class="dv">416</span><span class="op">**</span><span class="dv">2</span>)</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Mean area: </span><span class="sc">{:.2f}</span><span class="st"> m^2"</span>.<span class="bu">format</span>(np.mean(areas)))</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Standard deviation: </span><span class="sc">{:.2f}</span><span class="st"> m^2"</span>.<span class="bu">format</span>(np.std(areas)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Mean area: 191.52 m^2
Standard deviation: 630.70 m^2</code></pre>
</div>
</div>
<div id="cell-21" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the histogram of areas. What do you observe?</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>plt.hist(areas, bins<span class="op">=</span><span class="dv">50</span>, color<span class="op">=</span><span class="st">'skyblue'</span>, edgecolor<span class="op">=</span><span class="st">'black'</span>, label<span class="op">=</span><span class="st">'Frequency'</span>)</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>plt.axvline(x<span class="op">=</span>np.mean(areas), color<span class="op">=</span><span class="st">'red'</span>, linestyle<span class="op">=</span><span class="st">'dashed'</span>, linewidth<span class="op">=</span><span class="dv">2</span>, label <span class="op">=</span> <span class="st">'Mean'</span>)</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>plt.axvline(x<span class="op">=</span>np.percentile(areas, <span class="dv">95</span>), color<span class="op">=</span><span class="st">'green'</span>, linestyle<span class="op">=</span><span class="st">'dashed'</span>, linewidth<span class="op">=</span><span class="dv">2</span>, label <span class="op">=</span> <span class="st">'95th percentile'</span>)</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Area (m^2)'</span>)</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Frequency (log scale)'</span>)</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Histogram of areas'</span>)</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>plt.grid(axis<span class="op">=</span><span class="st">'y'</span>, alpha<span class="op">=</span><span class="fl">0.75</span>)</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>plt.yscale(<span class="st">'log'</span>)</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"More than 95% of instances have an area less than </span><span class="sc">{</span>np<span class="sc">.</span>percentile(areas, <span class="dv">95</span>)<span class="sc">:.2f}</span><span class="ss"> m^2. There are very few instances with extremely large areas (as large as </span><span class="sc">{</span><span class="bu">max</span>(areas)<span class="sc">:.2f}</span><span class="ss"> m^2)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_files/figure-html/cell-15-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>More than 95% of instances have an area less than 540.18 m^2. There are very few instances with extremely large areas (as large as 12177.41 m^2)</code></pre>
</div>
</div>
</section>
<section id="textgeoreferencing" class="level3">
<h3 class="anchored" data-anchor-id="textgeoreferencing"><span class="math inline">\(\text{Georeferencing}\)</span></h3>
<ul>
<li>Find each bounding box’s center coordinate (longitude, latitude) (Hint: use the information provided in the README file). Explain your method and show the verification with Google Maps Satellite view that your identification is correct.</li>
<li>Visualize the geolocations using the leafmap library with SATELLITE basemap. [https://leafmap.org/] Where are the clusters located?</li>
</ul>
<div id="cell-23" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Find each bounding box's center coordinate (longitude, latitude) (Hint: use the information provided in the README file). </span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Explain your method and show the verification with Google Maps Satellite view that your identification is correct.</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"""</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="st">Method:</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="st">1. Extract the tile index and min x &amp; y bounds (x0 &amp; y0) from the label_file's name.</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="st">2. Compute the EPSG:32633 coordinates of the desired chip using min x &amp; y bounds and the tile index from the tile information given in the README file.</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="st">      E = E0 + (x0 * x_res)         [x_rot = 0, E0 -&gt; Easting of tile's upper-left corner]</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="st">      N = N0 + (y0 * y_res)         [y_rot = 0, N0 -&gt; Northing of tile's upper-left corner]</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="st">3. Extract and compute the x_width, y_width, x_center, and y_center of the bounding box (in pixels) from the corresponding instance in all_labels.</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="st">      x_width = width * 416         [416 is the size of the image]</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a><span class="st">      y_width = height * 416        [416 is the size of the image]</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="st">      x_center = x_center * 416     [416 is the size of the image]</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a><span class="st">      y_center = y_center * 416     [416 is the size of the image]</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a><span class="st">4. Compute the coordinates of the bounding box using the chip's EPSG:32633 coordinates.</span></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a><span class="st">      x = E + (x_center * x_res)</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a><span class="st">      y = N + (y_center * y_res)</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a><span class="st">5. Convert the computed coordinates from EPSG:32633 to latitude and longitude using a coordinate transformer (EPSG:32633 -&gt; EPSG:4326).</span></span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a><span class="st">6. Return the computed latitude and longitude coordinates of the bounding box. </span></span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Method:
1. Extract the tile index and min x &amp; y bounds (x0 &amp; y0) from the label_file's name.
2. Compute the EPSG:32633 coordinates of the desired chip using min x &amp; y bounds and the tile index from the tile information given in the README file.
      E = E0 + (x0 * x_res)         [x_rot = 0, E0 -&gt; Easting of tile's upper-left corner]
      N = N0 + (y0 * y_res)         [y_rot = 0, N0 -&gt; Northing of tile's upper-left corner]
3. Extract and compute the x_width, y_width, x_center, and y_center of the bounding box (in pixels) from the corresponding instance in all_labels.
      x_width = width * 416         [416 is the size of the image]
      y_width = height * 416        [416 is the size of the image]
      x_center = x_center * 416     [416 is the size of the image]
      y_center = y_center * 416     [416 is the size of the image]
4. Compute the coordinates of the bounding box using the chip's EPSG:32633 coordinates.
      x = E + (x_center * x_res)
      y = N + (y_center * y_res)
5. Convert the computed coordinates from EPSG:32633 to latitude and longitude using a coordinate transformer (EPSG:32633 -&gt; EPSG:4326).
6. Return the computed latitude and longitude coordinates of the bounding box. 
</code></pre>
</div>
</div>
<p><strong>IMPORTANT</strong>: <br> <strong>Due to an unidentified cause, an inconsistent offset is being observed in the following questions.</strong><br> <strong>As a result, the bounding boxes estimated by the (lat, long) are not visually appearing to enclose the solar panel instance.</strong></p>
<section id="obtaining-the-coordinates-of-the-desired-chip" class="level4">
<h4 class="anchored" data-anchor-id="obtaining-the-coordinates-of-the-desired-chip">Obtaining the coordinates of the desired chip</h4>
<section id="example-1" class="level5">
<h5 class="anchored" data-anchor-id="example-1">Example 1</h5>
<div id="cell-27" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>label_files[<span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<pre><code>'solarpanels_native_1__x0_0_y0_6845_dxdy_416.txt'</code></pre>
</div>
</div>
<div id="cell-28" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>get_lat_long_of_chip(file_name<span class="op">=</span>label_files[<span class="dv">0</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<pre><code>[[49.013634580074424, 12.369630665081079],
 [49.0136747546675, 12.371392421009944],
 [49.0125159047291, 12.371453474625222],
 [49.012475731766365, 12.369691759500945]]</code></pre>
</div>
</div>
<p><img src="./media/new_chip_ex1.png" class="img-fluid" alt="new"> <br><br> Obtained from Google Earth</p>
<div id="cell-30" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>new <span class="op">=</span> cv2.imread(<span class="st">'./media/new_chip_ex1.png'</span>)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>new <span class="op">=</span> cv2.cvtColor(new, cv2.COLOR_BGR2RGB)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>old <span class="op">=</span> cv2.imread(os.path.join(images_dir_path, image_files[<span class="dv">0</span>]))</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>old <span class="op">=</span> cv2.cvtColor(old, cv2.COLOR_BGR2RGB)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-31" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">20</span>, <span class="dv">10</span>))</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].imshow(new)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].set_title(<span class="st">'Image from Google Earth'</span>)</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].axis(<span class="st">'off'</span>)</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].imshow(old)</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].set_title(<span class="st">'Image from the dataset'</span>)</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].axis(<span class="st">'off'</span>)</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_files/figure-html/cell-20-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="example-2" class="level5">
<h5 class="anchored" data-anchor-id="example-2">Example 2</h5>
<div id="cell-33" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>label_files[<span class="dv">1000</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<pre><code>'solarpanels_native_2__x0_0_y0_11476_dxdy_416.txt'</code></pre>
</div>
</div>
<div id="cell-34" class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>get_lat_long_of_chip(file_name<span class="op">=</span>label_files[<span class="dv">1000</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="28">
<pre><code>[[48.72842676305991, 12.453623859284367],
 [48.728465488528265, 12.455375746240692],
 [48.72730650416857, 12.455434260621793],
 [48.72726778026977, 12.453682413844513]]</code></pre>
</div>
</div>
<p><img src="./media/new_chip_ex2.png" class="img-fluid" alt="new"> <br><br> Obtained from Google Earth</p>
<div id="cell-36" class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>new <span class="op">=</span> cv2.imread(<span class="st">'./media/new_chip_ex2.png'</span>)</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>new <span class="op">=</span> cv2.cvtColor(new, cv2.COLOR_BGR2RGB)</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>old <span class="op">=</span> cv2.imread(os.path.join(images_dir_path, image_files[<span class="dv">1000</span>]))</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>old <span class="op">=</span> cv2.cvtColor(old, cv2.COLOR_BGR2RGB)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-37" class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">20</span>, <span class="dv">10</span>))</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].imshow(new)</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].set_title(<span class="st">'Image from Google Earth'</span>)</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].axis(<span class="st">'off'</span>)</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].imshow(old)</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].set_title(<span class="st">'Image from the dataset'</span>)</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].axis(<span class="st">'off'</span>)</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_files/figure-html/cell-24-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="example-3" class="level5">
<h5 class="anchored" data-anchor-id="example-3">Example 3</h5>
<div id="cell-39" class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>label_files[<span class="dv">2000</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="31">
<pre><code>'solarpanels_native_3__x0_7403_y0_13361_dxdy_416.txt'</code></pre>
</div>
</div>
<div id="cell-40" class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>get_lat_long_of_chip(file_name<span class="op">=</span>label_files[<span class="dv">2000</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="32">
<pre><code>[[48.35866815685048, 12.503100376777843],
 [48.35870591676594, 12.504839615313871],
 [48.35754681354012, 12.504896252762075],
 [48.35750905515276, 12.503157053604903]]</code></pre>
</div>
</div>
<p><img src="./media/new_chip_ex3.png" class="img-fluid" alt="new"> <br><br> Obtained from Google Earth</p>
<div id="cell-42" class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>new <span class="op">=</span> cv2.imread(<span class="st">'./media/new_chip_ex3.png'</span>)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>new <span class="op">=</span> cv2.cvtColor(new, cv2.COLOR_BGR2RGB)</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>old <span class="op">=</span> cv2.imread(os.path.join(images_dir_path, image_files[<span class="dv">2000</span>]))</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>old <span class="op">=</span> cv2.cvtColor(old, cv2.COLOR_BGR2RGB)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-43" class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">20</span>, <span class="dv">10</span>))</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].imshow(new)</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].set_title(<span class="st">'Image from Google Earth'</span>)</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].axis(<span class="st">'off'</span>)</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].imshow(old)</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].set_title(<span class="st">'Image from the dataset'</span>)</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].axis(<span class="st">'off'</span>)</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_files/figure-html/cell-28-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="obtaining-the-coordinates-of-the-desired-bounding-box" class="level4">
<h4 class="anchored" data-anchor-id="obtaining-the-coordinates-of-the-desired-bounding-box">Obtaining the coordinates of the desired bounding box</h4>
<section id="example-1-1" class="level5">
<h5 class="anchored" data-anchor-id="example-1-1">Example 1</h5>
<div id="cell-46" class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>label_files[<span class="dv">0</span>], all_labels[<span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="35">
<pre><code>('solarpanels_native_1__x0_0_y0_6845_dxdy_416.txt',
 ['0 0.8725961538461539 0.7007211538461539 0.057692307692307696 0.05528846153846154\n',
  '0 0.6201923076923077 0.6826923076923077 0.04326923076923077 0.038461538461538464\n',
  '0 0.7235576923076924 0.7548076923076924 0.05288461538461539 0.05288461538461539\n',
  '0 0.875 0.9350961538461539 0.028846153846153848 0.028846153846153848\n',
  '0 0.9158653846153847 0.9591346153846154 0.04326923076923077 0.03365384615384616\n',
  '0 0.9627403846153847 0.9963942307692308 0.040865384615384616 0.007211538461538462\n',
  '0 0.3245192307692308 0.9663461538461539 0.057692307692307696 0.0625\n',
  '0 0.6586538461538461 0.7223557692307693 0.038461538461538464 0.03125\n'])</code></pre>
</div>
</div>
<div id="cell-47" class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>get_lat_long_of_chip(file_name<span class="op">=</span>label_files[<span class="dv">0</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="36">
<pre><code>[[49.013634580074424, 12.369630665081079],
 [49.0136747546675, 12.371392421009944],
 [49.0125159047291, 12.371453474625222],
 [49.012475731766365, 12.369691759500945]]</code></pre>
</div>
</div>
<div id="cell-48" class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>get_lat_long_of_bb(file_name<span class="op">=</span>label_files[<span class="dv">0</span>], label<span class="op">=</span>all_labels[<span class="dv">0</span>], instance_idx<span class="op">=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="37">
<pre><code>[[49.01286836172854, 12.370764983932983],
 [49.01288977821848, 12.370725695204499],
 [49.012891516355644, 12.370801923877265],
 [49.012846945224595, 12.370804272627897],
 [49.01284520709013, 12.370728044023037]]</code></pre>
</div>
</div>
<p><img src="./media/bb_ex1.png" class="img-fluid" alt="new"> <br><br> Obtained from Google Earth</p>
<div id="cell-50" class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>new <span class="op">=</span> cv2.imread(<span class="st">'./media/bb_ex1.png'</span>)</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>new <span class="op">=</span> cv2.cvtColor(new, cv2.COLOR_BGR2RGB)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-51" class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>x_center, y_center, width, height <span class="op">=</span> <span class="bu">map</span>(<span class="bu">float</span>, all_labels[<span class="dv">0</span>][<span class="dv">1</span>].strip().split(<span class="st">" "</span>)[<span class="dv">1</span>:])</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>x_center, y_center <span class="op">=</span> x_center <span class="op">*</span> <span class="dv">416</span>, y_center<span class="op">*</span><span class="dv">416</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">20</span>, <span class="dv">10</span>))</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>display_image(all_images[<span class="dv">0</span>], all_labels[<span class="dv">0</span>], ax<span class="op">=</span>ax[<span class="dv">0</span>])</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].set_title(<span class="st">'Image from the dataset'</span>)</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].scatter(x_center, y_center, c<span class="op">=</span><span class="st">'red'</span>, s<span class="op">=</span><span class="dv">10</span>, marker<span class="op">=</span><span class="st">'x'</span>, label<span class="op">=</span><span class="st">'Center of the bounding box'</span>)</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].imshow(new)</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].set_title(<span class="st">'Image from Google Earth'</span>)</span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].axis(<span class="st">'off'</span>)</span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_files/figure-html/cell-33-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="example-2-1" class="level5">
<h5 class="anchored" data-anchor-id="example-2-1">Example 2</h5>
<div id="cell-53" class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>label_files[<span class="dv">1000</span>], all_labels[<span class="dv">1000</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="40">
<pre><code>('solarpanels_native_2__x0_0_y0_11476_dxdy_416.txt',
 ['0 0.3665865384615385 0.22235576923076925 0.1466346153846154 0.14182692307692307\n',
  '0 0.29927884615384615 0.296875 0.14182692307692307 0.14182692307692307\n',
  '0 0.875 0.028846153846153848 0.25 0.057692307692307696\n',
  '0 0.9182692307692308 0.29086538461538464 0.16346153846153846 0.19230769230769232\n',
  '0 0.8713942307692308 0.31490384615384615 0.1514423076923077 0.17307692307692307\n',
  '0 0.23076923076923078 0.3737980769230769 0.13461538461538464 0.14182692307692307\n',
  '0 0.3545673076923077 0.530048076923077 0.6225961538461539 0.6129807692307693\n',
  '0 0.7055288461538461 0.6430288461538461 0.23317307692307693 0.21875\n',
  '0 0.764423076923077 0.6983173076923077 0.21634615384615385 0.19951923076923078\n',
  '0 0.6033653846153847 0.8798076923076924 0.22115384615384617 0.22115384615384617\n',
  '0 0.46274038461538464 0.9603365384615385 0.19951923076923078 0.07932692307692309\n',
  '0 0.44591346153846156 0.8870192307692308 0.28125 0.22596153846153846\n',
  '0 0.4375 0.6262019230769231 0.04807692307692308 0.021634615384615384\n',
  '0 0.4338942307692308 0.6574519230769231 0.09855769230769232 0.026442307692307696\n',
  '0 0.4134615384615385 0.6838942307692308 0.1201923076923077 0.021634615384615384\n',
  '0 0.37980769230769235 0.7139423076923077 0.1201923076923077 0.02403846153846154\n',
  '0 0.3197115384615385 0.7740384615384616 0.125 0.02403846153846154\n',
  '0 0.35216346153846156 0.7427884615384616 0.12259615384615385 0.02403846153846154\n',
  '0 0.2932692307692308 0.8028846153846154 0.11538461538461539 0.02403846153846154\n',
  '0 0.2620192307692308 0.828125 0.1201923076923077 0.021634615384615384\n',
  '0 0.25961538461538464 0.8569711538461539 0.057692307692307696 0.021634615384615384\n',
  '0 0.49399038461538464 0.6995192307692308 0.05528846153846154 0.02403846153846154\n',
  '0 0.4987980769230769 0.7211538461538461 0.10336538461538462 0.03365384615384616\n',
  '0 0.48557692307692313 0.7427884615384616 0.10096153846153846 0.028846153846153848\n',
  '0 0.46274038461538464 0.7584134615384616 0.10817307692307693 0.03125\n',
  '0 0.4399038461538462 0.7764423076923077 0.11057692307692309 0.028846153846153848\n',
  '0 0.4278846153846154 0.7908653846153847 0.10576923076923078 0.03365384615384616\n',
  '0 0.4098557692307693 0.811298076923077 0.10817307692307693 0.03125\n',
  '0 0.3918269230769231 0.826923076923077 0.09615384615384616 0.028846153846153848\n',
  '0 0.3762019230769231 0.8473557692307693 0.10817307692307693 0.026442307692307696\n',
  '0 0.35216346153846156 0.8641826923076924 0.11298076923076923 0.03125\n',
  '0 0.3293269230769231 0.8810096153846154 0.11057692307692309 0.026442307692307696\n',
  '0 0.3185096153846154 0.921875 0.06490384615384616 0.021634615384615384\n',
  '0 0.3185096153846154 0.9447115384615385 0.03605769230769231 0.019230769230769232\n',
  '0 0.3185096153846154 0.9014423076923077 0.10336538461538462 0.028846153846153848\n'])</code></pre>
</div>
</div>
<div id="cell-54" class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>get_lat_long_of_chip(file_name<span class="op">=</span>label_files[<span class="dv">1000</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="41">
<pre><code>[[48.72842676305991, 12.453623859284367],
 [48.728465488528265, 12.455375746240692],
 [48.72730650416857, 12.455434260621793],
 [48.72726778026977, 12.453682413844513]]</code></pre>
</div>
</div>
<div id="cell-55" class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>get_lat_long_of_bb(file_name<span class="op">=</span>label_files[<span class="dv">1000</span>], label<span class="op">=</span>all_labels[<span class="dv">1000</span>], instance_idx<span class="op">=</span><span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="42">
<pre><code>[[48.72782618003159, 12.454276050344484],
 [48.72816933972369, 12.453712752265622],
 [48.72819345224244, 12.454803464416429],
 [48.72748301743422, 12.454839340767492],
 [48.72745890551453, 12.453748643950552]]</code></pre>
</div>
</div>
<p><img src="./media/bb_ex2.png" class="img-fluid" alt="new"> <br><br> Obtained from Google Earth</p>
<div id="cell-57" class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>new <span class="op">=</span> cv2.imread(<span class="st">'./media/bb_ex2.png'</span>)</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>new <span class="op">=</span> cv2.cvtColor(new, cv2.COLOR_BGR2RGB)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-58" class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>x_center, y_center, width, height <span class="op">=</span> <span class="bu">map</span>(<span class="bu">float</span>, all_labels[<span class="dv">1000</span>][<span class="dv">6</span>].strip().split(<span class="st">" "</span>)[<span class="dv">1</span>:])</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>x_center, y_center <span class="op">=</span> x_center <span class="op">*</span> <span class="dv">416</span>, y_center<span class="op">*</span><span class="dv">416</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">20</span>, <span class="dv">10</span>))</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>display_image(all_images[<span class="dv">1000</span>], all_labels[<span class="dv">1000</span>], ax<span class="op">=</span>ax[<span class="dv">0</span>])</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].set_title(<span class="st">'Image from the dataset'</span>)</span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].scatter(x_center, y_center, c<span class="op">=</span><span class="st">'red'</span>, s<span class="op">=</span><span class="dv">10</span>, marker<span class="op">=</span><span class="st">'x'</span>, label<span class="op">=</span><span class="st">'Center of the bounding box'</span>)</span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].imshow(new)</span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].set_title(<span class="st">'Image from Google Earth'</span>)</span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].axis(<span class="st">'off'</span>)</span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_files/figure-html/cell-38-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="example-3-1" class="level5">
<h5 class="anchored" data-anchor-id="example-3-1">Example 3</h5>
<div id="cell-60" class="cell" data-execution_count="45">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>label_files[<span class="dv">2000</span>], all_labels[<span class="dv">2000</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="45">
<pre><code>('solarpanels_native_3__x0_7403_y0_13361_dxdy_416.txt',
 ['0 0.40625 0.018028846153846156 0.04326923076923077 0.03605769230769231\n',
  '0 0.359375 0.3774038461538462 0.026442307692307696 0.02403846153846154\n'])</code></pre>
</div>
</div>
<div id="cell-61" class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>get_lat_long_of_chip(file_name<span class="op">=</span>label_files[<span class="dv">2000</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="46">
<pre><code>[[48.35866815685048, 12.503100376777843],
 [48.35870591676594, 12.504839615313871],
 [48.35754681354012, 12.504896252762075],
 [48.35750905515276, 12.503157053604903]]</code></pre>
</div>
</div>
<div id="cell-62" class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>get_lat_long_of_bb(file_name<span class="op">=</span>label_files[<span class="dv">2000</span>], label<span class="op">=</span>all_labels[<span class="dv">2000</span>], instance_idx<span class="op">=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="47">
<pre><code>[[48.358244280231766, 12.503746800346855],
 [48.358257712475286, 12.5037231247565],
 [48.35825871101753, 12.503769113843202],
 [48.3582308479831, 12.503770475924807],
 [48.35822984944184, 12.503724486863135]]</code></pre>
</div>
</div>
<p><img src="./media/bb_ex3.png" class="img-fluid" alt="new"> <br><br> Obtained from Google Earth</p>
<div id="cell-64" class="cell" data-execution_count="48">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>new <span class="op">=</span> cv2.imread(<span class="st">'./media/bb_ex3.png'</span>)</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>new <span class="op">=</span> cv2.cvtColor(new, cv2.COLOR_BGR2RGB)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-65" class="cell" data-execution_count="49">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>x_center, y_center, width, height <span class="op">=</span> <span class="bu">map</span>(<span class="bu">float</span>, all_labels[<span class="dv">2000</span>][<span class="dv">1</span>].strip().split(<span class="st">" "</span>)[<span class="dv">1</span>:])</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>x_center, y_center <span class="op">=</span> x_center <span class="op">*</span> <span class="dv">416</span>, y_center<span class="op">*</span><span class="dv">416</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">20</span>, <span class="dv">10</span>))</span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>display_image(all_images[<span class="dv">2000</span>], all_labels[<span class="dv">2000</span>], ax<span class="op">=</span>ax[<span class="dv">0</span>])</span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].set_title(<span class="st">'Image from the dataset'</span>)</span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].scatter(x_center, y_center, c<span class="op">=</span><span class="st">'red'</span>, s<span class="op">=</span><span class="dv">10</span>, marker<span class="op">=</span><span class="st">'x'</span>, label<span class="op">=</span><span class="st">'Center of the bounding box'</span>)</span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].imshow(new)</span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].set_title(<span class="st">'Image from Google Earth'</span>)</span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].axis(<span class="st">'off'</span>)</span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_files/figure-html/cell-43-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="leafmap-georeferencing" class="level4">
<h4 class="anchored" data-anchor-id="leafmap-georeferencing">Leafmap Georeferencing</h4>
<div id="cell-67" class="cell" data-execution_count="50">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> leafmap.Map()</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>m.add_basemap(<span class="st">'Google Hybrid'</span>, visible <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>m.add_markers(markers <span class="op">=</span> get_lat_long_of_bb(file_name<span class="op">=</span>label_files[<span class="dv">0</span>], label<span class="op">=</span>all_labels[<span class="dv">0</span>], instance_idx<span class="op">=</span><span class="dv">1</span>), x<span class="op">=</span><span class="st">'lon'</span>, y<span class="op">=</span><span class="st">'lat'</span>, radius<span class="op">=</span><span class="dv">10</span>, popup<span class="op">=</span><span class="va">None</span>, font_size<span class="op">=</span><span class="dv">2</span>, stroke<span class="op">=</span><span class="va">True</span>, color<span class="op">=</span><span class="st">'#0033FF'</span>, weight<span class="op">=</span><span class="dv">2</span>, fill<span class="op">=</span><span class="va">True</span>, fill_color<span class="op">=</span><span class="va">None</span>, fill_opacity<span class="op">=</span><span class="fl">0.2</span>, opacity<span class="op">=</span><span class="fl">1.0</span>, shape<span class="op">=</span><span class="st">'circle'</span>)</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>m.add_markers(markers <span class="op">=</span> get_lat_long_of_bb(file_name<span class="op">=</span>label_files[<span class="dv">1000</span>], label<span class="op">=</span>all_labels[<span class="dv">1000</span>], instance_idx<span class="op">=</span><span class="dv">6</span>), x<span class="op">=</span><span class="st">'lon'</span>, y<span class="op">=</span><span class="st">'lat'</span>, radius<span class="op">=</span><span class="dv">10</span>, popup<span class="op">=</span><span class="va">None</span>, font_size<span class="op">=</span><span class="dv">2</span>, stroke<span class="op">=</span><span class="va">True</span>, color<span class="op">=</span><span class="st">'#0033FF'</span>, weight<span class="op">=</span><span class="dv">2</span>, fill<span class="op">=</span><span class="va">True</span>, fill_color<span class="op">=</span><span class="va">None</span>, fill_opacity<span class="op">=</span><span class="fl">0.2</span>, opacity<span class="op">=</span><span class="fl">1.0</span>, shape<span class="op">=</span><span class="st">'circle'</span>)</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>m.add_markers(markers <span class="op">=</span> get_lat_long_of_bb(file_name<span class="op">=</span>label_files[<span class="dv">2000</span>], label<span class="op">=</span>all_labels[<span class="dv">2000</span>], instance_idx<span class="op">=</span><span class="dv">1</span>), x<span class="op">=</span><span class="st">'lon'</span>, y<span class="op">=</span><span class="st">'lat'</span>, radius<span class="op">=</span><span class="dv">10</span>, popup<span class="op">=</span><span class="va">None</span>, font_size<span class="op">=</span><span class="dv">2</span>, stroke<span class="op">=</span><span class="va">True</span>, color<span class="op">=</span><span class="st">'#0033FF'</span>, weight<span class="op">=</span><span class="dv">2</span>, fill<span class="op">=</span><span class="va">True</span>, fill_color<span class="op">=</span><span class="va">None</span>, fill_opacity<span class="op">=</span><span class="fl">0.2</span>, opacity<span class="op">=</span><span class="fl">1.0</span>, shape<span class="op">=</span><span class="st">'circle'</span>)</span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>m</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="50">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"4fe914d52aff47cb90662db01b442add","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
</div>
<p>As one can observe, the clusters are located near Munich, Germany.</p>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Made with <a href="https://quarto.org/">Quarto</a> © 2025 Digvijay | Guntas | Hrriday | Prathmesh</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>